import{S as re,i as ue,s as de,l as p,a as N,r as ce,a3 as _e,m as v,h as b,c as U,n as w,u as fe,p as t,N as r,b as $,a4 as X,V as he,d as pe,f as ve,t as me,M as ae,H as ne,W as be,X as ge,Y as Ee,Z as Te,a5 as le,G as ye,g as ke,a0 as Ne,E as Ue}from"../../chunks/index-a1aa545d.js";import{c as H}from"../../chunks/singletons-eca981c1.js";import{f as Me,s as oe}from"../../chunks/index-a0c96be0.js";H.disable_scroll_handling;H.goto;const we=H.invalidate;H.prefetch;H.prefetch_routes;H.before_navigate;H.after_navigate;function Y(d,{pending:e,error:a,result:n}={}){let f;async function y(g){const u=f={};g.preventDefault();const c=new FormData(d);e&&e({data:c,form:d});try{const h=await fetch(d.action,{method:d.method,headers:{accept:"application/json"},body:c});if(u!==f)return;if(h.ok){n&&n({data:c,form:d,response:h});const o=new URL(d.action);o.search=o.hash="",we(o.href)}else a?a({data:c,form:d,error:null,response:h}):console.error(await h.text())}catch(h){if(a&&h instanceof Error)a({data:c,form:d,error:h,response:null});else throw h}}return d.addEventListener("submit",y),{destroy(){d.removeEventListener("submit",y)}}}function se(d,e,a){const n=d.slice();return n[3]=e[a],n[4]=e,n[5]=a,n}function ie(d,e){let a,n,f,y,g,u,c,h,o,A,I,F,m,E,B,s,l,i,L,P,C,M,O,q,Z,D,j,G,z,R,J,K=Ue,k,Q,x;function ee(...T){return e[1](e[3],e[4],e[5],...T)}function te(){return e[2](e[3],e[4],e[5])}return{key:d,first:null,c(){a=p("div"),n=p("form"),f=p("input"),g=N(),u=p("input"),h=N(),o=p("button"),F=N(),m=p("form"),E=p("input"),s=N(),l=p("input"),L=N(),P=p("button"),C=N(),M=p("form"),O=p("input"),Z=N(),D=p("button"),z=N(),this.h()},l(T){a=v(T,"DIV",{class:!0});var _=w(a);n=v(_,"FORM",{action:!0,method:!0});var S=w(n);f=v(S,"INPUT",{type:!0,name:!0,class:!0}),g=U(S),u=v(S,"INPUT",{type:!0,name:!0,class:!0}),h=U(S),o=v(S,"BUTTON",{class:!0,"aria-label":!0}),w(o).forEach(b),S.forEach(b),F=U(_),m=v(_,"FORM",{class:!0,action:!0,method:!0});var V=w(m);E=v(V,"INPUT",{type:!0,name:!0,class:!0}),s=U(V),l=v(V,"INPUT",{"aria-label":!0,type:!0,name:!0,class:!0}),L=U(V),P=v(V,"BUTTON",{class:!0,"aria-label":!0}),w(P).forEach(b),V.forEach(b),C=U(_),M=v(_,"FORM",{action:!0,method:!0});var W=w(M);O=v(W,"INPUT",{type:!0,name:!0,class:!0}),Z=U(W),D=v(W,"BUTTON",{class:!0,"aria-label":!0}),w(D).forEach(b),W.forEach(b),z=U(_),_.forEach(b),this.h()},h(){t(f,"type","hidden"),t(f,"name","uid"),f.value=y=e[3].uid,t(f,"class","svelte-16nsat"),t(u,"type","hidden"),t(u,"name","done"),u.value=c=e[3].done?"":"true",t(u,"class","svelte-16nsat"),t(o,"class","toggle svelte-16nsat"),t(o,"aria-label",A="Mark todo as "+(e[3].done?"not done":"done")),t(n,"action","/todos?_method=PATCH"),t(n,"method","post"),t(E,"type","hidden"),t(E,"name","uid"),E.value=B=e[3].uid,t(E,"class","svelte-16nsat"),t(l,"aria-label","Edit todo"),t(l,"type","text"),t(l,"name","text"),l.value=i=e[3].text,t(l,"class","svelte-16nsat"),t(P,"class","save svelte-16nsat"),t(P,"aria-label","Save todo"),t(m,"class","text svelte-16nsat"),t(m,"action","/todos?_method=PATCH"),t(m,"method","post"),t(O,"type","hidden"),t(O,"name","uid"),O.value=q=e[3].uid,t(O,"class","svelte-16nsat"),t(D,"class","delete svelte-16nsat"),t(D,"aria-label","Delete todo"),D.disabled=j=e[3].pending_delete,t(M,"action","/todos?_method=DELETE"),t(M,"method","post"),t(a,"class","todo svelte-16nsat"),ae(a,"done",e[3].done),this.first=a},m(T,_){$(T,a,_),r(a,n),r(n,f),r(n,g),r(n,u),r(n,h),r(n,o),r(a,F),r(a,m),r(m,E),r(m,s),r(m,l),r(m,L),r(m,P),r(a,C),r(a,M),r(M,O),r(M,Z),r(M,D),r(a,z),k=!0,Q||(x=[X(I=Y.call(null,n,{pending:ee})),X(Y.call(null,m)),X(G=Y.call(null,M,{pending:te}))],Q=!0)},p(T,_){e=T,(!k||_&1&&y!==(y=e[3].uid))&&(f.value=y),(!k||_&1&&c!==(c=e[3].done?"":"true"))&&(u.value=c),(!k||_&1&&A!==(A="Mark todo as "+(e[3].done?"not done":"done")))&&t(o,"aria-label",A),I&&ne(I.update)&&_&1&&I.update.call(null,{pending:ee}),(!k||_&1&&B!==(B=e[3].uid))&&(E.value=B),(!k||_&1&&i!==(i=e[3].text)&&l.value!==i)&&(l.value=i),(!k||_&1&&q!==(q=e[3].uid))&&(O.value=q),(!k||_&1&&j!==(j=e[3].pending_delete))&&(D.disabled=j),G&&ne(G.update)&&_&1&&G.update.call(null,{pending:te}),_&1&&ae(a,"done",e[3].done)},r(){J=a.getBoundingClientRect()},f(){be(a),K(),ge(a,J)},a(){K(),K=Ee(a,J,Me,{duration:200})},i(T){k||(T&&Te(()=>{R||(R=le(a,oe,{start:.7},!0)),R.run(1)}),k=!0)},o(T){T&&(R||(R=le(a,oe,{start:.7},!1)),R.run(0)),k=!1},d(T){T&&b(a),T&&R&&R.end(),Q=!1,ye(x)}}}function Ie(d){let e,a,n,f,y,g,u,c,h,o=[],A=new Map,I,F,m,E=d[0];const B=s=>s[3].uid;for(let s=0;s<E.length;s+=1){let l=se(d,E,s),i=B(l);A.set(i,o[s]=ie(i,l))}return{c(){e=p("meta"),a=N(),n=p("div"),f=p("h1"),y=ce("Todos"),g=N(),u=p("form"),c=p("input"),h=N();for(let s=0;s<o.length;s+=1)o[s].c();this.h()},l(s){const l=_e('[data-svelte="svelte-aw2gey"]',document.head);e=v(l,"META",{name:!0,content:!0}),l.forEach(b),a=U(s),n=v(s,"DIV",{class:!0});var i=w(n);f=v(i,"H1",{});var L=w(f);y=fe(L,"Todos"),L.forEach(b),g=U(i),u=v(i,"FORM",{class:!0,action:!0,method:!0});var P=w(u);c=v(P,"INPUT",{name:!0,"aria-label":!0,placeholder:!0,class:!0}),P.forEach(b),h=U(i);for(let C=0;C<o.length;C+=1)o[C].l(i);i.forEach(b),this.h()},h(){document.title="Todos",t(e,"name","description"),t(e,"content","A todo list app"),t(c,"name","text"),t(c,"aria-label","Add todo"),t(c,"placeholder","+ tap to add a todo"),t(c,"class","svelte-16nsat"),t(u,"class","new svelte-16nsat"),t(u,"action","/todos"),t(u,"method","post"),t(n,"class","todos svelte-16nsat")},m(s,l){r(document.head,e),$(s,a,l),$(s,n,l),r(n,f),r(f,y),r(n,g),r(n,u),r(u,c),r(n,h);for(let i=0;i<o.length;i+=1)o[i].m(n,null);I=!0,F||(m=X(Y.call(null,u,{result:Pe})),F=!0)},p(s,[l]){if(l&1){E=s[0],ke();for(let i=0;i<o.length;i+=1)o[i].r();o=he(o,l,B,1,s,E,A,n,Ne,ie,null,se);for(let i=0;i<o.length;i+=1)o[i].a();pe()}},i(s){if(!I){for(let l=0;l<E.length;l+=1)ve(o[l]);I=!0}},o(s){for(let l=0;l<o.length;l+=1)me(o[l]);I=!1},d(s){b(e),s&&b(a),s&&b(n);for(let l=0;l<o.length;l+=1)o[l].d();F=!1,m()}}}const Pe=async({form:d})=>{d.reset()};function Oe(d,e,a){let{todos:n}=e;const f=(g,u,c,{data:h})=>{a(0,u[c].done=!!h.get("done"),n)},y=(g,u,c)=>a(0,u[c].pending_delete=!0,n);return d.$$set=g=>{"todos"in g&&a(0,n=g.todos)},[n,f,y]}class Fe extends re{constructor(e){super(),ue(this,e,Oe,Ie,de,{todos:0})}}export{Fe as default};
